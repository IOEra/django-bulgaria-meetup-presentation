<html>
  <head>
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/white.css" id="theme">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/default.min.css">
    <meta charset="utf-8" />
  </head>
  <body>
    <div class="reveal">
      <div class="slides">

        <section>
          <h3>
            Django, как и какво да (не) оптимизираме
          </h3>
        </section>

        <section>
          <img src="img/jj.jpg" height="50%"><br>
          <h3>Йордан Джамбазов</h3>
          Founder @ IO Era
        </section>

        <section>
          Оптимизация - модификация на система с цел подобряване на нейната ефективност.
        </section>

        <section>
          Цел: получаване на оптимална система
        </section>

        <section>
          Какво може да се оптимизира?<br>
          <ul>
            <li>код</li>
            <li>памет</li>
            <li>процесорно време</li>
            <li>...</li>
            <li>програмистско време</li>
          </ul>
        </section>

        <section>
          <ul>
            <li>Универсална оптимизация няма</li>
            <li>Напълно оптимална система няма</li>
            <li>Оптимизациите понякога изискват <i>trade-off</i></li>
          </ul>
        </section>

        <section>
          <h1>Какво означава Performance?</h1>
          <ul>
            <li>throughput?</li>
            <li>response time?</li>
            <li>render blocking?</li>
            <li>стабилност?</li>
          </ul>
        </section>

        <section>
          <h1>Scalability?</h1>
          <ul>
            <li>Способността да си променяме мащаба</li>
            <li>Вертикално - по-силен хардуер</li>
            <li>Хоризонтално - повече хардуер</li>
          </ul>
        </section>

        <section>
          <img src="img/django-logo.png">
        </section>

        <section>
          Може ли Django да скалира?
        </section>

        <section>
          Само по себе си - не.
        </section>

        <section>
          <img src="img/logos/redis.png">
          <img src="img/logos/nginx.gif">
          <img src="img/logos/postgresql.png">
          <img src="img/logos/memcached.png">
          <img src="img/logos/haproxy.png">
          <img src="img/logos/aws.png">
        </section>

        <section>
          <img src="img/know-your-tools.jpg" />
        </section>

        <section>
          Спонтанната оптимизация води до спонтанни резултати.
        </section>

        <section>
          <h1>Не предполагай</h1>
          <ul>
            <li>Django Debug Toolbar</li>
            <li>django-silk</li>
            <li>cProfile (django-cprofile-middleware)</li>
          </ul>
        </section>

        <section>
          Познавай ORM-a
        </section>

        <section>
          <pre>
            <code class="python">
class Author(models.Model):
    name = CharField()

class Book(models.Model):
    title = CharField()
    author = ForeignKey(Author)
            </code>
          </pre>
        </section>

        <section>
          <pre><code class="django">
{% for book in books %}
    {{ book.author.name }} // отделна заявка на всяка итерация
{% endfor %}
          </code></pre>
        </section>

        <section>
          <pre><code class="python">
Book.objects.select_related('author').all()
Author.objects.prefetch_related('book_set').all()
          </code></pre>
        </section>

        <section>
          Кеширай - колкото се може повече
        </section>

        <section>

        </section>

        <section>
          Не решавай проблеми, които нямаш.
        </section>

        <section>
          "Premature optimization is the root of all evil"<br>Donald Knuth
        </section>

        <section>
          References:<br>
          <ul>
            <li>Django - Performance and Optimization: docs.djangoproject.com/en/1.10/topics/performance/</li>
            <li>High Performance Django: highperformancedjango.com</li>
          </ul>
        </section>

      </div>
    </div>
    <script src="js/reveal.js"></script>
    <script src="lib/js/head.min.js"></script>
    <script>
      Reveal.initialize({
        dependencies: [
          {
            src: 'plugin/highlight/highlight.js',
            async: true,
            callback: function() {
              hljs.initHighlightingOnLoad();
            }
          },
        ]
      });
    </script>
  </body>
</html>
